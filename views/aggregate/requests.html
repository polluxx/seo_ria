<agg-head></agg-head>

<div class="progress aggregator">
    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{percentile}}" aria-valuemin="0" aria-valuemax="100" ng-style="{'width': percentile+'%'}">
        <span class="sr-only">40% Complete (success)</span>
    </div>
</div>


<div ng-show="searcheble && !errors.length" class="outer" loading-container="tableParams.settings().$loading">
    <table ng-table="tableParams" class="seo-table table-new ac-custom ac-checkbox ac-checkmark" checkboxer="td">
        <tbody>
        <tr ng-repeat="post in $data" ng-class="{'active': selected.items[post.src]}">
            <td style="text-align: center" width="50" header="'ng-table/headers/checkbox.html'">
                <label class="label-checkbox "><input class="chk-row" type="checkbox" ng-model="selected.items[post.src]" ng-change="checkBox(post, selected.items[post.src])"/></label>
            </td>
            <td data-title="'Фраза'" sortable="'src'">
                <span>{{post.src}}</span>
                <span ng-if="post.updated" class="updated-link">
                    <div class="glyphicon glyphicon-time list-time" style="padding-right: 5px !important;"></div>
                    <div class="list-time">{{post.updated | date : 'y-MM-d HH:mm'}}</div>
                </span>
            </td>
            <td data-title="'Показы'" sortable="'queriesCount'">
                <span>{{post.queriesCount || 0}}</span>
            </td>
            <td>
                <a href="javascript:void(0)" class="glyphicon glyphicon-trash remove" title="remove" ng-click="remove([post.src])"></a>
            </td>

        </tr>
        </tbody>
    </table>

    <div class="view-buttons passive " id="op_buttons" ng-class="{'active': marked.length}">
        <div class="inputbox marked-text">Выбрано: {{marked.length}}</div>
        <div class="btn btn-success inputbox outer" ng-click="next(marked)"><span class="glyphicon glyphicon-play-circle"></span><span>В работу</span></div>
        <div class="btn btn-danger inputbox outer" ng-click="remove(marked)"><span class="glyphicon glyphicon-trash remove"></span><span>Удалить</span></div>
        <div class="btn btn-default inputbox outer" ng-click="export(marked)"><span class="glyphicon glyphicon-repeat remove"></span><span>в АВП</span></div>
    </div>
</div>

<script type="text/ng-template" id="ng-table/headers/checkbox.html">
    <input type="checkbox" ng-model="selected.checked" id="select_all" name="filter-checkbox" value="" />
</script>
